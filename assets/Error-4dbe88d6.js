import{S as q,a as L,n as H,i as A,b as B,t as Z,f as X,c as ee,d as D,e as te,g as T,r as i,h as re,p as se,j as R,s as j,L as ne,_ as ie}from"./index-85ed9fc2.js";import{u as J,f as oe,a as ue,P as ce,L as ae,m as V}from"./motion-5cc9b154.js";class le extends q{constructor(e,r){super(),this.client=e,this.options=r,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(r)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.currentQuery.addObserver(this),K(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return U(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return U(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(e,r){const s=this.options,u=this.currentQuery;if(this.options=this.client.defaultQueryOptions(e),L(s,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=s.queryKey),this.updateQuery();const n=this.hasListeners();n&&N(this.currentQuery,u,this.options,s)&&this.executeFetch(),this.updateResult(r),n&&(this.currentQuery!==u||this.options.enabled!==s.enabled||this.options.staleTime!==s.staleTime)&&this.updateStaleTimeout();const o=this.computeRefetchInterval();n&&(this.currentQuery!==u||this.options.enabled!==s.enabled||o!==this.currentRefetchInterval)&&this.updateRefetchInterval(o)}getOptimisticResult(e){const r=this.client.getQueryCache().build(this.client,e);return this.createResult(r,e)}getCurrentResult(){return this.currentResult}trackResult(e){const r={};return Object.keys(e).forEach(s=>{Object.defineProperty(r,s,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(s),e[s])})}),r}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:e,...r}={}){return this.fetch({...r,meta:{refetchPage:e}})}fetchOptimistic(e){const r=this.client.defaultQueryOptions(e),s=this.client.getQueryCache().build(this.client,r);return s.isFetchingOptimistic=!0,s.fetch().then(()=>this.createResult(s,r))}fetch(e){var r;return this.executeFetch({...e,cancelRefetch:(r=e.cancelRefetch)!=null?r:!0}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(e){this.updateQuery();let r=this.currentQuery.fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch(H)),r}updateStaleTimeout(){if(this.clearStaleTimeout(),A||this.currentResult.isStale||!B(this.options.staleTime))return;const r=Z(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},r)}computeRefetchInterval(){var e;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(e=this.options.refetchInterval)!=null?e:!1}updateRefetchInterval(e){this.clearRefetchInterval(),this.currentRefetchInterval=e,!(A||this.options.enabled===!1||!B(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||X.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(e,r){const s=this.currentQuery,u=this.options,n=this.currentResult,o=this.currentResultState,a=this.currentResultOptions,p=e!==s,d=p?e.state:this.currentQueryInitialState,l=p?this.currentResult:this.previousQueryResult,{state:c}=e;let{dataUpdatedAt:v,error:b,errorUpdatedAt:S,fetchStatus:g,status:y}=c,k=!1,f=!1,h;if(r._optimisticResults){const m=this.hasListeners(),Q=!m&&K(e,r),G=m&&N(e,s,r,u);(Q||G)&&(g=ee(e.options.networkMode)?"fetching":"paused",v||(y="loading")),r._optimisticResults==="isRestoring"&&(g="idle")}if(r.keepPreviousData&&!c.dataUpdatedAt&&l!=null&&l.isSuccess&&y!=="error")h=l.data,v=l.dataUpdatedAt,y=l.status,k=!0;else if(r.select&&typeof c.data<"u")if(n&&c.data===(o==null?void 0:o.data)&&r.select===this.selectFn)h=this.selectResult;else try{this.selectFn=r.select,h=r.select(c.data),h=D(n==null?void 0:n.data,h,r),this.selectResult=h,this.selectError=null}catch(m){this.selectError=m}else h=c.data;if(typeof r.placeholderData<"u"&&typeof h>"u"&&y==="loading"){let m;if(n!=null&&n.isPlaceholderData&&r.placeholderData===(a==null?void 0:a.placeholderData))m=n.data;else if(m=typeof r.placeholderData=="function"?r.placeholderData():r.placeholderData,r.select&&typeof m<"u")try{m=r.select(m),this.selectError=null}catch(Q){this.selectError=Q}typeof m<"u"&&(y="success",h=D(n==null?void 0:n.data,m,r),f=!0)}this.selectError&&(b=this.selectError,h=this.selectResult,S=Date.now(),y="error");const C=g==="fetching",w=y==="loading",E=y==="error";return{status:y,fetchStatus:g,isLoading:w,isSuccess:y==="success",isError:E,isInitialLoading:w&&C,data:h,dataUpdatedAt:v,error:b,errorUpdatedAt:S,failureCount:c.fetchFailureCount,failureReason:c.fetchFailureReason,errorUpdateCount:c.errorUpdateCount,isFetched:c.dataUpdateCount>0||c.errorUpdateCount>0,isFetchedAfterMount:c.dataUpdateCount>d.dataUpdateCount||c.errorUpdateCount>d.errorUpdateCount,isFetching:C,isRefetching:C&&!w,isLoadingError:E&&c.dataUpdatedAt===0,isPaused:g==="paused",isPlaceholderData:f,isPreviousData:k,isRefetchError:E&&c.dataUpdatedAt!==0,isStale:P(e,r),refetch:this.refetch,remove:this.remove}}updateResult(e){const r=this.currentResult,s=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,L(s,r))return;this.currentResult=s;const u={cache:!0},n=()=>{if(!r)return!0;const{notifyOnChangeProps:o}=this.options;if(o==="all"||!o&&!this.trackedProps.size)return!0;const a=new Set(o??this.trackedProps);return this.options.useErrorBoundary&&a.add("error"),Object.keys(this.currentResult).some(p=>{const d=p;return this.currentResult[d]!==r[d]&&a.has(d)})};(e==null?void 0:e.listeners)!==!1&&n()&&(u.listeners=!0),this.notify({...u,...e})}updateQuery(){const e=this.client.getQueryCache().build(this.client,this.options);if(e===this.currentQuery)return;const r=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))}onQueryUpdate(e){const r={};e.type==="success"?r.onSuccess=!e.manual:e.type==="error"&&!te(e.error)&&(r.onError=!0),this.updateResult(r),this.hasListeners()&&this.updateTimers()}notify(e){T.batch(()=>{if(e.onSuccess){var r,s,u,n;(r=(s=this.options).onSuccess)==null||r.call(s,this.currentResult.data),(u=(n=this.options).onSettled)==null||u.call(n,this.currentResult.data,null)}else if(e.onError){var o,a,p,d;(o=(a=this.options).onError)==null||o.call(a,this.currentResult.error),(p=(d=this.options).onSettled)==null||p.call(d,void 0,this.currentResult.error)}e.listeners&&this.listeners.forEach(({listener:l})=>{l(this.currentResult)}),e.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function he(t,e){return e.enabled!==!1&&!t.state.dataUpdatedAt&&!(t.state.status==="error"&&e.retryOnMount===!1)}function K(t,e){return he(t,e)||t.state.dataUpdatedAt>0&&U(t,e,e.refetchOnMount)}function U(t,e,r){if(e.enabled!==!1){const s=typeof r=="function"?r(t):r;return s==="always"||s!==!1&&P(t,e)}return!1}function N(t,e,r,s){return r.enabled!==!1&&(t!==e||s.enabled===!1)&&(!r.suspense||t.state.status!=="error")&&P(t,r)}function P(t,e){return t.isStaleByTime(e.staleTime)}var _={exports:{}},$={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I=i;function de(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var fe=typeof Object.is=="function"?Object.is:de,pe=I.useState,me=I.useEffect,ye=I.useLayoutEffect,Re=I.useDebugValue;function ve(t,e){var r=e(),s=pe({inst:{value:r,getSnapshot:e}}),u=s[0].inst,n=s[1];return ye(function(){u.value=r,u.getSnapshot=e,M(u)&&n({inst:u})},[t,r,e]),me(function(){return M(u)&&n({inst:u}),t(function(){M(u)&&n({inst:u})})},[t]),Re(r),r}function M(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!fe(t,r)}catch{return!0}}function ge(t,e){return e()}var Ee=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?ge:ve;$.useSyncExternalStore=I.useSyncExternalStore!==void 0?I.useSyncExternalStore:Ee;_.exports=$;var be=_.exports;const Ce=be.useSyncExternalStore,W=i.createContext(!1),Se=()=>i.useContext(W);W.Provider;function xe(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}const Ie=i.createContext(xe()),we=()=>i.useContext(Ie);function Qe(t,e){return typeof t=="function"?t(...e):!!t}const Te=(t,e)=>{(t.suspense||t.useErrorBoundary)&&(e.isReset()||(t.retryOnMount=!1))},Oe=t=>{i.useEffect(()=>{t.clearReset()},[t])},ke=({result:t,errorResetBoundary:e,useErrorBoundary:r,query:s})=>t.isError&&!e.isReset()&&!t.isFetching&&Qe(r,[t.error,s]),Me=t=>{t.suspense&&typeof t.staleTime!="number"&&(t.staleTime=1e3)},Fe=(t,e)=>t.isLoading&&t.isFetching&&!e,Ue=(t,e,r)=>(t==null?void 0:t.suspense)&&Fe(e,r),je=(t,e,r)=>e.fetchOptimistic(t).then(({data:s})=>{t.onSuccess==null||t.onSuccess(s),t.onSettled==null||t.onSettled(s,null)}).catch(s=>{r.clearReset(),t.onError==null||t.onError(s),t.onSettled==null||t.onSettled(void 0,s)});function Pe(t,e){const r=re({context:t.context}),s=Se(),u=we(),n=r.defaultQueryOptions(t);n._optimisticResults=s?"isRestoring":"optimistic",n.onError&&(n.onError=T.batchCalls(n.onError)),n.onSuccess&&(n.onSuccess=T.batchCalls(n.onSuccess)),n.onSettled&&(n.onSettled=T.batchCalls(n.onSettled)),Me(n),Te(n,u),Oe(u);const[o]=i.useState(()=>new e(r,n)),a=o.getOptimisticResult(n);if(Ce(i.useCallback(p=>{const d=s?()=>{}:o.subscribe(T.batchCalls(p));return o.updateResult(),d},[o,s]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),i.useEffect(()=>{o.setOptions(n,{listeners:!1})},[n,o]),Ue(n,a,s))throw je(n,o,u);if(ke({result:a,errorResetBoundary:u,useErrorBoundary:n.useErrorBoundary,query:o.getCurrentQuery()}))throw a.error;return n.notifyOnChangeProps?a:o.trackResult(a)}function st(t,e,r){const s=se(t,e,r);return Pe(s,le)}function Y(){const t=i.useRef(!1);return J(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function ze(){const t=Y(),[e,r]=i.useState(0),s=i.useCallback(()=>{t.current&&r(e+1)},[e]);return[i.useCallback(()=>oe.postRender(s),[s]),e]}class Le extends i.Component{getSnapshotBeforeUpdate(e){const r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=r.offsetHeight||0,s.width=r.offsetWidth||0,s.top=r.offsetTop,s.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Ae({children:t,isPresent:e}){const r=i.useId(),s=i.useRef(null),u=i.useRef({width:0,height:0,top:0,left:0});return i.useInsertionEffect(()=>{const{width:n,height:o,top:a,left:p}=u.current;if(e||!s.current||!n||!o)return;s.current.dataset.motionPopId=r;const d=document.createElement("style");return document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${n}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${p}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[e]),i.createElement(Le,{isPresent:e,childRef:s,sizeRef:u},i.cloneElement(t,{ref:s}))}const F=({children:t,initial:e,isPresent:r,onExitComplete:s,custom:u,presenceAffectsLayout:n,mode:o})=>{const a=ue(Be),p=i.useId(),d=i.useMemo(()=>({id:p,initial:e,isPresent:r,custom:u,onExitComplete:l=>{a.set(l,!0);for(const c of a.values())if(!c)return;s&&s()},register:l=>(a.set(l,!1),()=>a.delete(l))}),n?void 0:[r]);return i.useMemo(()=>{a.forEach((l,c)=>a.set(c,!1))},[r]),i.useEffect(()=>{!r&&!a.size&&s&&s()},[r]),o==="popLayout"&&(t=i.createElement(Ae,{isPresent:r},t)),i.createElement(ce.Provider,{value:d},t)};function Be(){return new Map}function De(t){return i.useEffect(()=>()=>t(),[])}const x=t=>t.key||"";function Ke(t,e){t.forEach(r=>{const s=x(r);e.set(s,r)})}function Ne(t){const e=[];return i.Children.forEach(t,r=>{i.isValidElement(r)&&e.push(r)}),e}const Je=({children:t,custom:e,initial:r=!0,onExitComplete:s,exitBeforeEnter:u,presenceAffectsLayout:n=!0,mode:o="sync"})=>{const a=i.useContext(ae).forceRender||ze()[0],p=Y(),d=Ne(t);let l=d;const c=i.useRef(new Map).current,v=i.useRef(l),b=i.useRef(new Map).current,S=i.useRef(!0);if(J(()=>{S.current=!1,Ke(d,b),v.current=l}),De(()=>{S.current=!0,b.clear(),c.clear()}),S.current)return i.createElement(i.Fragment,null,l.map(f=>i.createElement(F,{key:x(f),isPresent:!0,initial:r?void 0:!1,presenceAffectsLayout:n,mode:o},f)));l=[...l];const g=v.current.map(x),y=d.map(x),k=g.length;for(let f=0;f<k;f++){const h=g[f];y.indexOf(h)===-1&&!c.has(h)&&c.set(h,void 0)}return o==="wait"&&c.size&&(l=[]),c.forEach((f,h)=>{if(y.indexOf(h)!==-1)return;const C=b.get(h);if(!C)return;const w=g.indexOf(h);let E=f;if(!E){const z=()=>{b.delete(h),c.delete(h);const m=v.current.findIndex(Q=>Q.key===h);if(v.current.splice(m,1),!c.size){if(v.current=d,p.current===!1)return;a(),s&&s()}};E=i.createElement(F,{key:x(C),isPresent:!1,onExitComplete:z,custom:e,presenceAffectsLayout:n,mode:o},C),c.set(h,E)}l.splice(w,0,E)}),l=l.map(f=>{const h=f.key;return c.has(h)?f:i.createElement(F,{key:x(f),isPresent:!0,presenceAffectsLayout:n,mode:o},f)}),i.createElement(i.Fragment,null,c.size?l:l.map(f=>i.cloneElement(f)))},Ve="https://api.themoviedb.org/3",_e="Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJjZjA1Y2ExNTE4Y2RiYjhiNGEwMzFmNmExYjg3MzNiMCIsInN1YiI6IjY0OGE5OGUxMDc2Y2U4MDEwNjBmZTExMSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.zJB_l-AUpcqKXCBpNxBP5xt6CT-EVYEt8mwV-nu7kjQ";function nt(t,e){return`https://image.tmdb.org/t/p/${e||"original"}/${t}`}const $e={method:"GET",headers:{accept:"application/json",Authorization:_e}};async function O(t){return await(await fetch(`${Ve}/${t}`,$e)).json()}function it(){return O("movie/now_playing?language=ko-KR&page=1")}function ot(){return O("movie/upcoming?language=ko-KR&page=1&region=kr")}function ut(t){return O(`movie/${t}?language=ko-KR`)}function ct(t){return O(`search/multi?language=ko-KR&page=1&region=kr&query=${t}`)}async function at(t){return(await O(`movie/${t}/videos?language=en-US`)).results.filter(r=>r.type==="Trailer")[0]}const We=()=>{const[t,e]=i.useState({width:window.innerWidth});return i.useEffect(()=>{const r=()=>{e({width:window.innerWidth})};return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),t},lt=We,Ye=j(V.div)`
  padding: 20px;
  background-color: ${t=>t.theme.black.lighter};
  opacity: 0;
  position: absolute;
  width: 100%;
  bottom: 0;
  h3 {
    font-size: 18px;
    margin-bottom: 10px;
  }
`,Ge={hover:{opacity:1,transition:{delay:.375,type:"tween",duration:.25}}};function qe({title:t}){return R.jsx(Ye,{variants:Ge,children:R.jsx("h3",{children:t})})}const He=i.lazy(()=>ie(()=>import("./TrailerModal-7e90573f.js"),["assets/TrailerModal-7e90573f.js","assets/index-85ed9fc2.js","assets/motion-5cc9b154.js"])),Ze=j(V.div)`
  background-color: grey;
  height: 200px;
  position: relative;
  color: white;
  font-size: 18px;
  background-image: linear-gradient(rgba(0, 0, 0, 0.125), rgba(0, 0, 0, 0.375)),
    url(${t=>t.bgPhoto});
  background-size: cover;
  background-position: center center;
  &:first-child {
    transform-origin: center left;
  }
  &:last-child {
    transform-origin: center right;
  }
  cursor: pointer;
`,Xe={normal:{scale:1},hover:{scale:1.25,y:-20,zIndex:1,transition:{delay:.375,type:"tween",duration:.25}}};function ht({movieId:t,movieTitle:e,movieBackdropPath:r}){const[s,u]=i.useState(!1),n=()=>{u(!0)},o=()=>{u(!1)};return R.jsxs(R.Fragment,{children:[R.jsx(Je,{children:R.jsx(Ze,{layoutId:""+t,variants:Xe,onClick:n,whileHover:"hover",bgPhoto:r,transition:{type:"tween"},children:R.jsx(qe,{title:e})},t)}),s&&R.jsx(i.Suspense,{fallback:R.jsx(ne,{}),children:R.jsx(He,{movieId:t+"",onClickOverlay:o})})]})}const et=j.div`
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  color: ${t=>t.theme.white.lighter};
`;function dt(){return R.jsx(et,{children:"An error has occurred..."})}export{Je as A,dt as E,ht as T,st as a,ot as b,ct as c,ut as d,at as e,it as f,nt as m,lt as u};
