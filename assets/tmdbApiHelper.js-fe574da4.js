import{S as q,a as L,n as H,i as A,b as B,t as Z,f as X,c as ee,d as D,e as te,g as k,r as i,h as re,p as se,j as v,s as j,L as ne,_ as ie}from"./index-2bab09fc.js";import{u as _,f as oe,a as ue,P as ae,L as ce,m as J}from"./motion-511182b0.js";class le extends q{constructor(e,r){super(),this.client=e,this.options=r,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(r)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.currentQuery.addObserver(this),K(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return U(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return U(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(e,r){const s=this.options,u=this.currentQuery;if(this.options=this.client.defaultQueryOptions(e),L(s,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=s.queryKey),this.updateQuery();const n=this.hasListeners();n&&N(this.currentQuery,u,this.options,s)&&this.executeFetch(),this.updateResult(r),n&&(this.currentQuery!==u||this.options.enabled!==s.enabled||this.options.staleTime!==s.staleTime)&&this.updateStaleTimeout();const o=this.computeRefetchInterval();n&&(this.currentQuery!==u||this.options.enabled!==s.enabled||o!==this.currentRefetchInterval)&&this.updateRefetchInterval(o)}getOptimisticResult(e){const r=this.client.getQueryCache().build(this.client,e);return this.createResult(r,e)}getCurrentResult(){return this.currentResult}trackResult(e){const r={};return Object.keys(e).forEach(s=>{Object.defineProperty(r,s,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(s),e[s])})}),r}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:e,...r}={}){return this.fetch({...r,meta:{refetchPage:e}})}fetchOptimistic(e){const r=this.client.defaultQueryOptions(e),s=this.client.getQueryCache().build(this.client,r);return s.isFetchingOptimistic=!0,s.fetch().then(()=>this.createResult(s,r))}fetch(e){var r;return this.executeFetch({...e,cancelRefetch:(r=e.cancelRefetch)!=null?r:!0}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(e){this.updateQuery();let r=this.currentQuery.fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch(H)),r}updateStaleTimeout(){if(this.clearStaleTimeout(),A||this.currentResult.isStale||!B(this.options.staleTime))return;const r=Z(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},r)}computeRefetchInterval(){var e;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(e=this.options.refetchInterval)!=null?e:!1}updateRefetchInterval(e){this.clearRefetchInterval(),this.currentRefetchInterval=e,!(A||this.options.enabled===!1||!B(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||X.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(e,r){const s=this.currentQuery,u=this.options,n=this.currentResult,o=this.currentResultState,c=this.currentResultOptions,p=e!==s,d=p?e.state:this.currentQueryInitialState,l=p?this.currentResult:this.previousQueryResult,{state:a}=e;let{dataUpdatedAt:R,error:b,errorUpdatedAt:x,fetchStatus:g,status:y}=a,O=!1,f=!1,h;if(r._optimisticResults){const m=this.hasListeners(),T=!m&&K(e,r),G=m&&N(e,s,r,u);(T||G)&&(g=ee(e.options.networkMode)?"fetching":"paused",R||(y="loading")),r._optimisticResults==="isRestoring"&&(g="idle")}if(r.keepPreviousData&&!a.dataUpdatedAt&&l!=null&&l.isSuccess&&y!=="error")h=l.data,R=l.dataUpdatedAt,y=l.status,O=!0;else if(r.select&&typeof a.data<"u")if(n&&a.data===(o==null?void 0:o.data)&&r.select===this.selectFn)h=this.selectResult;else try{this.selectFn=r.select,h=r.select(a.data),h=D(n==null?void 0:n.data,h,r),this.selectResult=h,this.selectError=null}catch(m){this.selectError=m}else h=a.data;if(typeof r.placeholderData<"u"&&typeof h>"u"&&y==="loading"){let m;if(n!=null&&n.isPlaceholderData&&r.placeholderData===(c==null?void 0:c.placeholderData))m=n.data;else if(m=typeof r.placeholderData=="function"?r.placeholderData():r.placeholderData,r.select&&typeof m<"u")try{m=r.select(m),this.selectError=null}catch(T){this.selectError=T}typeof m<"u"&&(y="success",h=D(n==null?void 0:n.data,m,r),f=!0)}this.selectError&&(b=this.selectError,h=this.selectResult,x=Date.now(),y="error");const C=g==="fetching",Q=y==="loading",E=y==="error";return{status:y,fetchStatus:g,isLoading:Q,isSuccess:y==="success",isError:E,isInitialLoading:Q&&C,data:h,dataUpdatedAt:R,error:b,errorUpdatedAt:x,failureCount:a.fetchFailureCount,failureReason:a.fetchFailureReason,errorUpdateCount:a.errorUpdateCount,isFetched:a.dataUpdateCount>0||a.errorUpdateCount>0,isFetchedAfterMount:a.dataUpdateCount>d.dataUpdateCount||a.errorUpdateCount>d.errorUpdateCount,isFetching:C,isRefetching:C&&!Q,isLoadingError:E&&a.dataUpdatedAt===0,isPaused:g==="paused",isPlaceholderData:f,isPreviousData:O,isRefetchError:E&&a.dataUpdatedAt!==0,isStale:P(e,r),refetch:this.refetch,remove:this.remove}}updateResult(e){const r=this.currentResult,s=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,L(s,r))return;this.currentResult=s;const u={cache:!0},n=()=>{if(!r)return!0;const{notifyOnChangeProps:o}=this.options;if(o==="all"||!o&&!this.trackedProps.size)return!0;const c=new Set(o??this.trackedProps);return this.options.useErrorBoundary&&c.add("error"),Object.keys(this.currentResult).some(p=>{const d=p;return this.currentResult[d]!==r[d]&&c.has(d)})};(e==null?void 0:e.listeners)!==!1&&n()&&(u.listeners=!0),this.notify({...u,...e})}updateQuery(){const e=this.client.getQueryCache().build(this.client,this.options);if(e===this.currentQuery)return;const r=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))}onQueryUpdate(e){const r={};e.type==="success"?r.onSuccess=!e.manual:e.type==="error"&&!te(e.error)&&(r.onError=!0),this.updateResult(r),this.hasListeners()&&this.updateTimers()}notify(e){k.batch(()=>{if(e.onSuccess){var r,s,u,n;(r=(s=this.options).onSuccess)==null||r.call(s,this.currentResult.data),(u=(n=this.options).onSettled)==null||u.call(n,this.currentResult.data,null)}else if(e.onError){var o,c,p,d;(o=(c=this.options).onError)==null||o.call(c,this.currentResult.error),(p=(d=this.options).onSettled)==null||p.call(d,void 0,this.currentResult.error)}e.listeners&&this.listeners.forEach(({listener:l})=>{l(this.currentResult)}),e.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function he(t,e){return e.enabled!==!1&&!t.state.dataUpdatedAt&&!(t.state.status==="error"&&e.retryOnMount===!1)}function K(t,e){return he(t,e)||t.state.dataUpdatedAt>0&&U(t,e,e.refetchOnMount)}function U(t,e,r){if(e.enabled!==!1){const s=typeof r=="function"?r(t):r;return s==="always"||s!==!1&&P(t,e)}return!1}function N(t,e,r,s){return r.enabled!==!1&&(t!==e||s.enabled===!1)&&(!r.suspense||t.state.status!=="error")&&P(t,r)}function P(t,e){return t.isStaleByTime(e.staleTime)}var V={exports:{}},$={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w=i;function de(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var fe=typeof Object.is=="function"?Object.is:de,pe=w.useState,me=w.useEffect,ye=w.useLayoutEffect,ve=w.useDebugValue;function Re(t,e){var r=e(),s=pe({inst:{value:r,getSnapshot:e}}),u=s[0].inst,n=s[1];return ye(function(){u.value=r,u.getSnapshot=e,M(u)&&n({inst:u})},[t,r,e]),me(function(){return M(u)&&n({inst:u}),t(function(){M(u)&&n({inst:u})})},[t]),ve(r),r}function M(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!fe(t,r)}catch{return!0}}function ge(t,e){return e()}var Ee=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?ge:Re;$.useSyncExternalStore=w.useSyncExternalStore!==void 0?w.useSyncExternalStore:Ee;V.exports=$;var be=V.exports;const Ce=be.useSyncExternalStore,W=i.createContext(!1),Se=()=>i.useContext(W);W.Provider;function xe(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}const Ie=i.createContext(xe()),we=()=>i.useContext(Ie);function Qe(t,e){return typeof t=="function"?t(...e):!!t}const Te=(t,e)=>{(t.suspense||t.useErrorBoundary)&&(e.isReset()||(t.retryOnMount=!1))},ke=t=>{i.useEffect(()=>{t.clearReset()},[t])},Oe=({result:t,errorResetBoundary:e,useErrorBoundary:r,query:s})=>t.isError&&!e.isReset()&&!t.isFetching&&Qe(r,[t.error,s]),Me=t=>{t.suspense&&typeof t.staleTime!="number"&&(t.staleTime=1e3)},Fe=(t,e)=>t.isLoading&&t.isFetching&&!e,Ue=(t,e,r)=>(t==null?void 0:t.suspense)&&Fe(e,r),je=(t,e,r)=>e.fetchOptimistic(t).then(({data:s})=>{t.onSuccess==null||t.onSuccess(s),t.onSettled==null||t.onSettled(s,null)}).catch(s=>{r.clearReset(),t.onError==null||t.onError(s),t.onSettled==null||t.onSettled(void 0,s)});function Pe(t,e){const r=re({context:t.context}),s=Se(),u=we(),n=r.defaultQueryOptions(t);n._optimisticResults=s?"isRestoring":"optimistic",n.onError&&(n.onError=k.batchCalls(n.onError)),n.onSuccess&&(n.onSuccess=k.batchCalls(n.onSuccess)),n.onSettled&&(n.onSettled=k.batchCalls(n.onSettled)),Me(n),Te(n,u),ke(u);const[o]=i.useState(()=>new e(r,n)),c=o.getOptimisticResult(n);if(Ce(i.useCallback(p=>{const d=s?()=>{}:o.subscribe(k.batchCalls(p));return o.updateResult(),d},[o,s]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),i.useEffect(()=>{o.setOptions(n,{listeners:!1})},[n,o]),Ue(n,c,s))throw je(n,o,u);if(Oe({result:c,errorResetBoundary:u,useErrorBoundary:n.useErrorBoundary,query:o.getCurrentQuery()}))throw c.error;return n.notifyOnChangeProps?c:o.trackResult(c)}function st(t,e,r){const s=se(t,e,r);return Pe(s,le)}function Y(){const t=i.useRef(!1);return _(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function ze(){const t=Y(),[e,r]=i.useState(0),s=i.useCallback(()=>{t.current&&r(e+1)},[e]);return[i.useCallback(()=>oe.postRender(s),[s]),e]}class Le extends i.Component{getSnapshotBeforeUpdate(e){const r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=r.offsetHeight||0,s.width=r.offsetWidth||0,s.top=r.offsetTop,s.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Ae({children:t,isPresent:e}){const r=i.useId(),s=i.useRef(null),u=i.useRef({width:0,height:0,top:0,left:0});return i.useInsertionEffect(()=>{const{width:n,height:o,top:c,left:p}=u.current;if(e||!s.current||!n||!o)return;s.current.dataset.motionPopId=r;const d=document.createElement("style");return document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${n}px !important;
            height: ${o}px !important;
            top: ${c}px !important;
            left: ${p}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[e]),i.createElement(Le,{isPresent:e,childRef:s,sizeRef:u},i.cloneElement(t,{ref:s}))}const F=({children:t,initial:e,isPresent:r,onExitComplete:s,custom:u,presenceAffectsLayout:n,mode:o})=>{const c=ue(Be),p=i.useId(),d=i.useMemo(()=>({id:p,initial:e,isPresent:r,custom:u,onExitComplete:l=>{c.set(l,!0);for(const a of c.values())if(!a)return;s&&s()},register:l=>(c.set(l,!1),()=>c.delete(l))}),n?void 0:[r]);return i.useMemo(()=>{c.forEach((l,a)=>c.set(a,!1))},[r]),i.useEffect(()=>{!r&&!c.size&&s&&s()},[r]),o==="popLayout"&&(t=i.createElement(Ae,{isPresent:r},t)),i.createElement(ae.Provider,{value:d},t)};function Be(){return new Map}function De(t){return i.useEffect(()=>()=>t(),[])}const I=t=>t.key||"";function Ke(t,e){t.forEach(r=>{const s=I(r);e.set(s,r)})}function Ne(t){const e=[];return i.Children.forEach(t,r=>{i.isValidElement(r)&&e.push(r)}),e}const _e=({children:t,custom:e,initial:r=!0,onExitComplete:s,exitBeforeEnter:u,presenceAffectsLayout:n=!0,mode:o="sync"})=>{const c=i.useContext(ce).forceRender||ze()[0],p=Y(),d=Ne(t);let l=d;const a=i.useRef(new Map).current,R=i.useRef(l),b=i.useRef(new Map).current,x=i.useRef(!0);if(_(()=>{x.current=!1,Ke(d,b),R.current=l}),De(()=>{x.current=!0,b.clear(),a.clear()}),x.current)return i.createElement(i.Fragment,null,l.map(f=>i.createElement(F,{key:I(f),isPresent:!0,initial:r?void 0:!1,presenceAffectsLayout:n,mode:o},f)));l=[...l];const g=R.current.map(I),y=d.map(I),O=g.length;for(let f=0;f<O;f++){const h=g[f];y.indexOf(h)===-1&&!a.has(h)&&a.set(h,void 0)}return o==="wait"&&a.size&&(l=[]),a.forEach((f,h)=>{if(y.indexOf(h)!==-1)return;const C=b.get(h);if(!C)return;const Q=g.indexOf(h);let E=f;if(!E){const z=()=>{b.delete(h),a.delete(h);const m=R.current.findIndex(T=>T.key===h);if(R.current.splice(m,1),!a.size){if(R.current=d,p.current===!1)return;c(),s&&s()}};E=i.createElement(F,{key:I(C),isPresent:!1,onExitComplete:z,custom:e,presenceAffectsLayout:n,mode:o},C),a.set(h,E)}l.splice(Q,0,E)}),l=l.map(f=>{const h=f.key;return a.has(h)?f:i.createElement(F,{key:I(f),isPresent:!0,presenceAffectsLayout:n,mode:o},f)}),i.createElement(i.Fragment,null,a.size?l:l.map(f=>i.cloneElement(f)))},Je=()=>{const[t,e]=i.useState({width:window.innerWidth});return i.useEffect(()=>{const r=()=>{e({width:window.innerWidth})};return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),t},nt=Je,Ve={hover:{opacity:1,transition:{delay:.375,type:"tween",duration:.25}}};function $e({title:t}){return v.jsx(We,{variants:Ve,children:v.jsx("h3",{children:t})})}const We=j(J.div)`
  padding: 20px;
  background-color: ${t=>t.theme.black.lighter};
  opacity: 0;
  position: absolute;
  width: 100%;
  bottom: 0;
  h3 {
    font-size: 18px;
    margin-bottom: 10px;
  }
`,Ye=i.lazy(()=>ie(()=>import("./TrailerModal-e4439e3f.js"),["assets/TrailerModal-e4439e3f.js","assets/index-2bab09fc.js","assets/index-d7add844.js","assets/motion-511182b0.js"])),Ge={normal:{scale:1},hover:{scale:1.25,y:-20,zIndex:1,transition:{delay:.375,type:"tween",duration:.25}}};function it({movieId:t,movieTitle:e,movieBackdropPath:r}){const[s,u]=i.useState(!1),n=()=>{u(!0)},o=()=>{u(!1)};return v.jsxs(v.Fragment,{children:[v.jsx(_e,{children:v.jsx(qe,{layoutId:""+t,variants:Ge,onClick:n,whileHover:"hover",bgPhoto:r,transition:{type:"tween"},children:v.jsx($e,{title:e})},t)}),s&&v.jsx(i.Suspense,{fallback:v.jsx(ne,{}),children:v.jsx(Ye,{movieId:t+"",onClickOverlay:o})})]})}const qe=j(J.div)`
  background-color: grey;
  height: 200px;
  position: relative;
  color: white;
  font-size: 18px;
  background-image: linear-gradient(rgba(0, 0, 0, 0.125), rgba(0, 0, 0, 0.375)),
    url(${t=>t.bgPhoto});
  background-size: cover;
  background-position: center center;
  &:first-child {
    transform-origin: center left;
  }
  &:last-child {
    transform-origin: center right;
  }
  cursor: pointer;
`;function ot(t,e){return`https://image.tmdb.org/t/p/${e||"original"}/${t}`}const He=j.div`
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  color: ${t=>t.theme.white.lighter};
`;function ut(){return v.jsx(He,{children:"An error has occurred..."})}const Ze="https://api.themoviedb.org/3",Xe="Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJjZjA1Y2ExNTE4Y2RiYjhiNGEwMzFmNmExYjg3MzNiMCIsInN1YiI6IjY0OGE5OGUxMDc2Y2U4MDEwNjBmZTExMSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.zJB_l-AUpcqKXCBpNxBP5xt6CT-EVYEt8mwV-nu7kjQ",et={method:"GET",headers:{accept:"application/json",Authorization:Xe}};async function S(t){return await(await fetch(`${Ze}/${t}`,et)).json()}function at(){return S("movie/now_playing?language=ko-KR&page=1")}function ct(){return S("movie/upcoming?language=ko-KR&page=1&region=kr")}function lt(){return S("movie/top_rated?language=ko-KR&page=1&region=kr")}function ht(){return S("movie/popular?language=ko-KR&page=1&region=ko")}function dt(t){return S(`search/multi?language=ko-KR&page=1&region=kr&query=${t}`)}function ft(t){return S(`keyword/${t}?language=ko-KR`)}async function pt(t){return(await S(`movie/${t}/videos?language=en-US`)).results.filter(r=>r.type==="Trailer")[0]}export{_e as A,ut as E,it as T,st as a,ct as b,lt as c,ht as d,dt as e,ft as f,at as g,pt as h,ot as m,nt as u};
